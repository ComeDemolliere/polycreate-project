## Règles de réécriture

C'est dans ce module que l'on retrouve la sémantique comportementale de notre language. Nous avons fait le choix d'utiliser Kermeta3 permettant, grâce à une sémantique opérationnelle, de définir des règles de réécriture de notre language. Ceci permet de redéfinir, via la notion d'Aspect, chaque objet de notre language et de lui appliquer une logique métier en Java. C'est donc ici que nous échangeons directement avec le robot aspirateur grâce à la librairie Java [PolytechWebotsController](https://github.com/jdeantoni/polytechWebotsController).

Notre programme va exécuter une boucle infinie sur les états du système. Le but est de toujours être en train d'éxécuter les actions de l'état courant. Pour ce faire, nous allons boucler toujours sur le même état jusqu'à ce qu'une transition vers un autre état soit déclenchée. <br>
Concernant les transitions, on prioritise toujours les transitions globales plutôt que les transitions propres à l'état courant. Nous avons fait ce choix, car nous estimons que si l'utilisateur définit des transitions globales c'est qu'il veut pouvoir déclencher ces transitions de manière prioritaire dans le but de pouvoir rediriger le robot vers un ou des états spécifique(s) à cette transition.<br>
De plus, afin que les transitions puissent être vérifiées de manière régulière, lorsque l'on exécute une action d'un état, nous avons mis en place la notion de step. Cette notion de step permet de découper une action en un ensemble de steps comportant un temps relativement petit (~32ms). A chaque step on va vérifier les conditions des transitions et si une  transition est valide alors elle sera déclenchée. Cette notion de step a été mis en place pour l'action Move, ce qui permet de définir des mouvements non bloquants pendant une certaine durée. Pour l'action Turn, ceci n'a pas été mis en place. On ne regardera donc pas les éventuelles transitions pendant que le robot est en train de faire une rotation. Quant-à l'action Grip ce n'est pas une action bloquante, le robot va continuer d'effectuer d'autres actions pendant que la pince s'ouvre ou se ferme.